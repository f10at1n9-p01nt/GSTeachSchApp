<script>

  document.getElementById("submit").addEventListener("click", userClicked);
  // document.getElementById('username').addEventListener('input', userTyped);
  document.getElementById("submit-preferences").addEventListener("click", submitPreferences);


  function userClicked() {
    console.log("here");
    google.script.run.withSuccessHandler(printSchedule).checkSchedule(document.getElementById('username').value)
  }


// Buggy - text doesn't stay on screen
  // function userTyped(e) {
  //   google.script.run.withSuccessHandler(printSchedule).checkSchedule(e.target.value);
  // }


  function printSchedule(schedule) {
    const here = document.getElementById('here');
    // here.textContent = schedule;

    while (here.firstChild) {
      here.removeChild(here.lastChild);
    }

    for (let i = 0; i < schedule.length; i++) {
      let newEl = document.createElement('li');
      newEl.classList.add("ml-5", "mt-3");
      let newText = document.createTextNode(`${schedule[i][0]} ${schedule[i][1]}`)
      newEl.appendChild(newText);
      here.appendChild(newEl);
    }
  }



  function submitPreferences() {
    const usernameField = document.getElementById('username');
    const username = usernameField.value;

    google.script.run.addUsername(username);

    console.log(`${username} clicked the button`)
    usernameField.value = '';
  }

</script>